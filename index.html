<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body{background:#020617;color:white;font-family:sans-serif}</style>
</head>
<body class="h-screen flex items-center justify-center">
    <div class="w-full max-w-sm p-8 bg-slate-900 rounded-xl border border-slate-800 shadow-2xl">
        <h2 class="text-2xl font-bold text-center text-purple-500 mb-6 uppercase">Crear Cuenta</h2>
        
        <div class="space-y-4">
            <input type="text" id="user" placeholder="Usuario nuevo" class="w-full p-3 bg-slate-950 border border-slate-700 rounded text-white outline-none focus:border-purple-500">
            <input type="password" id="pass" placeholder="Contraseña nueva" class="w-full p-3 bg-slate-950 border border-slate-700 rounded text-white outline-none focus:border-purple-500">
            
            <button onclick="doRegister()" class="w-full py-3 bg-purple-600 hover:bg-purple-700 rounded font-bold transition-all uppercase text-sm">
                Registrarme
            </button>
            
            <div class="text-center text-xs mt-4 text-slate-500">
                <a href="/login.html" class="hover:text-purple-400">¿Ya tienes cuenta? Inicia Sesión</a>
            </div>
            <p id="msg" class="text-center text-red-500 text-xs font-bold mt-2"></p>
        </div>
    </div>

    <script>
        async function doRegister() {
            const contact = document.getElementById('user').value;
            const password = document.getElementById('pass').value;
            
            if(!contact || !password) return document.getElementById('msg').innerText = "Llena los campos";

            try {
                const res = await fetch('/register', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contact, password })
                });
                const data = await res.json();
                
                if(data.status === 'success') window.location.href = data.redirect;
                else document.getElementById('msg').innerText = data.message;
            } catch (e) {
                document.getElementById('msg').innerText = "Error de conexión";
            }
        }
    </script>
</body>
</html>
